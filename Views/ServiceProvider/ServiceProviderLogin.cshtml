@model Sewa360.Models.SericeProvider

@{
    Layout = null;
}
@{
    var msg = TempData["msg"] as string;
}

@if (!string.IsNullOrEmpty(msg))
{
    <div class="d-flex justify-content-center">
        <div class="alert alert-success alert-dismissible fade show shadow rounded-pill px-4 py-3 mt-4 text-center"
             role="alert"
             style="font-weight: 500; font-size: 16px; max-width: 500px; width: 100%;">
            @* Optional icon *@
            @* <i class="bi bi-check-circle-fill me-2"></i> *@
            @msg
           @*  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button> *@
        </div>
    </div>

    <script>
        setTimeout(() => {
            const alert = document.querySelector('.alert');
            if (alert) {
                alert.classList.remove('show');
                alert.classList.add('fade');
                setTimeout(() => alert.remove(), 500);
            }
        }, 4000);
    </script>
}


@if (ViewBag.Error != null)
{
    <div class="toast-container position-fixed top-50 start-50 translate-middle p-3" style="z-index: 1100;">
        <div id="loginErrorToast" class="toast text-bg-danger show" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="d-flex">
                <div class="toast-body">
                    @ViewBag.Error
                </div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
        </div>
    </div>

    <script>
        // Auto-hide after 4 seconds
        setTimeout(function () {
            var toastEl = document.getElementById('loginErrorToast');
            if (toastEl) {
                toastEl.classList.remove('show');
                toastEl.classList.add('hide');
            }
        }, 4000);
    </script>
}



<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>Service-Provider Login</title>

    <link rel="stylesheet" href="~/template2/vendors/iconfonts/font-awesome/css/all.min.css" />
    <link rel="stylesheet" href="~/template2/vendors/css/vendor.bundle.base.css" />
    <link rel="stylesheet" href="~/template2/vendors/css/vendor.bundle.addons.css" />
    <link rel="stylesheet" href="~/template2/css/style.css" />
    <link rel="shortcut icon" href="~/template2/images/favicon.png" />

    <!-- Font Awesome CDN for icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />


    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <style>
        .toast.hide {
            display: none !important;
        }

    </style>

</head>

<body>
    <div class="container-scroller">
        <div class="container-fluid page-body-wrapper full-page-wrapper">
            <div class="content-wrapper d-flex align-items-stretch auth auth-img-bg">
                <div class="row flex-grow">
                    <div class="col-lg-6 d-flex align-items-center justify-content-center">
                        <div class="auth-form-transparent text-left p-3">

                            <h4 class="text-center text-primary fw-bold py-3 border-bottom border-3 border-primary"
                                style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; letter-spacing: 1.2px; text-transform: uppercase; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                                <i class="fa-solid fa-user-tie me-2" style="color: #0d6efd;"></i>
                                Service-Provider Login Panel
                            </h4>

                            @using (Html.BeginForm("ServiceProviderLogin", "ServiceProvider", FormMethod.Post, new { @class = "pt-3" }))
                            {
                                    <div class="form-group">
                                        <label asp-for="ServiceProv_Email">Email</label>
                                        <div class="input-group">
                                            <div class="input-group-prepend bg-transparent">
                                                <span class="input-group-text bg-transparent border-right-0">
                                                    <i class="fa fa-user text-primary"></i>
                                                </span>
                                            </div>
                                        @Html.TextBoxFor(m => m.ServiceProv_Email, new { @class = "form-control form-control-lg border-left-0", placeholder = "Email*", Type = "email" })
                                        </div>
                                    <span asp-validation-for="ServiceProv_Name" class="text-danger"></span>
                                    </div>

                                @*  <div class="form-group">
                                    <label asp-for="Manager_Code">Referral Code</label>
                                    <div class="input-group">
                                        <div class="input-group-prepend bg-transparent">
                                            <span class="input-group-text bg-transparent border-right-0">
                                                <i class="fa fa-code text-primary"></i>
                                            </span>
                                        </div>
                                        @Html.TextBoxFor(m => m.Manager_Code, new
                                            {
                                                @class = "form-control form-control-lg border-left-0",
                                                placeholder = "Referral Code*",
                                                id = "ManagerCode"
                                            })
                                    </div>
                                    <span asp-validation-for="Manager_Code" class="text-danger"></span>
                                    <small id="managerNameDisplay" class="text-success mt-1" style="display:none;"></small>
                                </div> *@

                                    <div class="form-group">
                                    <label asp-for="ServiceProv_Password">Password</label>
                                        <div class="input-group">
                                            <div class="input-group-prepend bg-transparent">
                                                <span class="input-group-text bg-transparent border-right-0">
                                                    <i class="fa fa-lock text-primary"></i>
                                                </span>
                                            </div>
                                        @Html.PasswordFor(m => m.ServiceProv_Password, new { @class = "form-control form-control-lg border-left-0", placeholder = "Password*" })
                                        </div>
                                    <span asp-validation-for="ServiceProv_Password" class="text-danger"></span>
                                    </div>

                                    <div class="my-2 d-flex justify-content-between align-items-center">
                                        <div class="form-check">
                                            <label class="form-check-label text-muted">
                                                <input type="checkbox" class="form-check-input" name="RememberMe" />
                                                Keep me signed in
                                            </label>
                                        </div>
                                        <a href="#" class="auth-link text-black">Forgot password?</a>
                                    </div>

                                    <div class="my-3">
                                        <button type="submit" class="btn btn-block btn-primary btn-lg font-weight-medium auth-form-btn">
                                            LOGIN
                                        </button>
                                    </div>

                                    <div class="mb-2 d-flex">
                                        <button type="button" class="btn btn-facebook auth-form-btn flex-grow mr-1">
                                            <i class="fab fa-facebook-f mr-2"></i>Facebook
                                        </button>
                                        <button type="button" class="btn btn-google auth-form-btn flex-grow ml-1">
                                            <i class="fab fa-google mr-2"></i>Google
                                        </button>
                                    </div>

                                    <div class="text-center mt-4 font-weight-light">
                                        Don't have an account? <a href="register-2.html" class="text-primary">Create</a>
                                    </div>
                            }
                        </div>
                    </div>

                    <div class="col-lg-6 login-half-bg d-flex flex-row">
                        <p class="text-white font-weight-medium text-center flex-grow align-self-end">
                            Copyright &copy; @DateTime.Now.Year All rights reserved.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        $(document).ready(function () {
            $('#ManagerCode').on('input', function () {
                var code = $(this).val();
                if (code.length > 0) {
                    $.ajax({
                        url: '@Url.Action("GetManagerNameByCode", "Manager", new { area = "Admin" })',
                        type: 'GET',
                        data: { code: code },
                        success: function (data) {
                            if (data) {
                                $('#managerNameDisplay').text("Manager Name: " + data).show();
                            } else {
                                $('#managerNameDisplay').hide();
                            }
                        },
                        error: function () {
                            $('#managerNameDisplay').hide();
                        }
                    });
                } else {
                    $('#managerNameDisplay').hide();
                }
            });
        });
    </script>

    <script src="~/template2/vendors/js/vendor.bundle.base.js"></script>
    <script src="~/template2/vendors/js/vendor.bundle.addons.js"></script>
    <script src="~/template2/js/off-canvas.js"></script>
    <script src="~/template2/js/hoverable-collapse.js"></script>
    <script src="~/template2/js/misc.js"></script>
    <script src="~/template2/js/settings.js"></script>
    <script src="~/template2/js/todolist.js"></script>


    
</body>
</html>
