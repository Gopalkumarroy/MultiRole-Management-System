@model Sewa360.Models.PartnerKYC

@{
    ViewBag.Title = "Edit KYC";
    Layout = "~/Views/Shared/_layoutpartner.cshtml";
}

@if (TempData["Success"] != null)
{
    <div class="alert alert-success" id="successAlert">
        @TempData["Success"]
    </div>
}

@if (TempData["Error"] != null)
{
    <div class="alert alert-danger" id="errorAlert">
        @TempData["Error"]
    </div>
}

<div class="container mt-5">
    <div class="card shadow rounded-4">
        <div class="card-header bg-primary text-white text-center">
            <h4>Edit KYC Information</h4>
        </div>
        <div class="card-body p-4">
            <form asp-action="EditKYC" enctype="multipart/form-data" method="post">
                @* Hidden IDs *@
                <input type="hidden" asp-for="KYC_Id" />
                <input type="hidden" asp-for="Partner_Id" />

                <div class="row mb-3">
                    <div class="col-md-6">
                        <label asp-for="AadhaarNumber" class="form-label"></label>
                        <input asp-for="AadhaarNumber" class="form-control" placeholder="Enter Aadhaar number" />
                        <span asp-validation-for="AadhaarNumber" class="text-danger"></span>
                    </div>
                    <div class="col-md-6">
                        <label asp-for="PanNumber" class="form-label"></label>
                        <input asp-for="PanNumber" class="form-control" placeholder="Enter PAN number" />
                        <span asp-validation-for="PanNumber" class="text-danger"></span>
                    </div>
                </div>

                <div class="row mb-4">
                    <div class="col-md-6">
                        <div class="card h-100 shadow-sm">
                            <div class="card-header bg-light">
                                Aadhaar Document
                            </div>
                            <div class="card-body text-center">
                                @if (!string.IsNullOrEmpty(Model.AadhaarDocumentPath))
                                {
                                    <img src="@Model.AadhaarDocumentPath" alt="Aadhaar" class="img-fluid rounded mb-2" style="max-height: 250px;" />
                                    <p><a href="@Model.AadhaarDocumentPath" target="_blank">View Full Aadhaar</a></p>
                                }
                                else
                                {
                                    <p class="text-muted">Aadhaar not uploaded.</p>
                                }
                                <input type="file" name="AadhaarDoc" class="form-control mt-2" accept=".jpg,.jpeg,.png,.pdf" />
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="card h-100 shadow-sm">
                            <div class="card-header bg-light">
                                PAN Card Document
                            </div>
                            <div class="card-body text-center">
                                @if (!string.IsNullOrEmpty(Model.PanCardDocumentPath))
                                {
                                    <img src="@Model.PanCardDocumentPath" alt="PAN" class="img-fluid rounded mb-2" style="max-height: 250px;" />
                                    <p><a href="@Model.PanCardDocumentPath" target="_blank">View Full PAN</a></p>
                                }
                                else
                                {
                                    <p class="text-muted">PAN not uploaded.</p>
                                }
                                <input type="file" name="PanCardDoc" class="form-control mt-2" accept=".jpg,.jpeg,.png,.pdf" />
                            </div>
                        </div>
                    </div>
                </div>

                <hr />

                <div class="row mb-3">
                    <div class="col-md-6">
                        <label asp-for="AccountHolderName" class="form-label"></label>
                        <input asp-for="AccountHolderName" class="form-control" />
                        <span asp-validation-for="AccountHolderName" class="text-danger"></span>
                    </div>
                    <div class="col-md-6">
                        <label asp-for="BankName" class="form-label"></label>
                        <input asp-for="BankName" class="form-control" />
                        <span asp-validation-for="BankName" class="text-danger"></span>
                    </div>
                </div>

                <div class="row mb-4">
                    <div class="col-md-6">
                        <label asp-for="AccountNumber" class="form-label"></label>
                        <input asp-for="AccountNumber" class="form-control" />
                        <span asp-validation-for="AccountNumber" class="text-danger"></span>
                    </div>
                    <div class="col-md-6">
                        <label asp-for="IFSC" class="form-label"></label>
                        <input asp-for="IFSC" class="form-control" />
                        <span asp-validation-for="IFSC" class="text-danger"></span>
                    </div>
                </div>

                <div class="text-center mt-4">
                    <button type="submit" class="btn btn-success btn-lg px-4">Update KYC</button>
                    <a href="@Url.Action("KycStatus", "Partner")" class="btn btn-secondary btn-lg ms-2">Back</a>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    @await Html.PartialAsync("_ValidationScriptsPartial")

    <script>
        setTimeout(() => {
            const alerts = document.querySelectorAll('#successAlert, #errorAlert');
            alerts.forEach(alert => {
                alert.style.transition = 'opacity 1s ease';
                alert.style.opacity = '0';
                setTimeout(() => alert.remove(), 1000);
            });
        }, 5000);
    </script>
}
