@model PartnerKYC

@{
    ViewBag.Title = "KYC Status";
    Layout = "~/Views/Shared/_layoutpartner.cshtml";
}

<div class="container py-4">
    <h2 class="mb-4 text-center text-primary fw-bold">Your KYC Status</h2>

    <!-- Alert Messages -->
    @foreach (var type in new[] { "Success", "Error", "Info" })
    {
        var message = TempData[type] as string;
        if (!string.IsNullOrEmpty(message))
        {
            var alertClass = type == "Success" ? "success" :
            type == "Error" ? "danger" : "info";
            <div class="alert alert-@alertClass fade-message text-center fw-semibold">
                @message
            </div>
        }
    }

    <!-- KYC Card -->
    <div class="card border-0 shadow-lg rounded-4 mb-5">
        <div class="card-header bg-gradient bg-primary text-white d-flex justify-content-between align-items-center rounded-top-4 py-3 px-4">
            <h5 class="mb-0"><i class="bi bi-shield-check me-2"></i>KYC Details</h5>
            <span class="badge fs-6 px-3 py-2 rounded-pill
                @(Model.KycStatus == "Approved" ? "bg-success" :
                  Model.KycStatus == "Rejected" ? "bg-danger" : "bg-warning text-dark")">
                @Model.KycStatus
            </span>
        </div>

        <div class="card-body p-4">
            <div class="row mb-4">
                <div class="col-md-6 mb-3">
                    <label class="fw-bold"><i class="bi bi-credit-card-2-front-fill me-2"></i>Aadhaar Number:</label>
                    <div class="text-muted">@Model.AadhaarNumber</div>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="fw-bold"><i class="bi bi-credit-card-fill me-2"></i>PAN Number:</label>
                    <div class="text-muted">@Model.PanNumber</div>
                </div>
            </div>

            <div class="row mb-4">
                <div class="col-md-6 mb-3">
                    <label class="fw-bold"><i class="bi bi-person-circle me-2"></i>Account Holder:</label>
                    <div class="text-muted">@Model.AccountHolderName</div>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="fw-bold"><i class="bi bi-bank me-2"></i>Bank Name:</label>
                    <div class="text-muted">@Model.BankName</div>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="fw-bold"><i class="bi bi-hash me-2"></i>Account Number:</label>
                    <div class="text-muted">@Model.AccountNumber</div>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="fw-bold"><i class="bi bi-code-slash me-2"></i>IFSC:</label>
                    <div class="text-muted">@Model.IFSC</div>
                </div>
            </div>

            <div class="row text-center mt-4">
                <div class="col-md-6 mb-4">
                    <div class="border p-3 rounded shadow-sm">
                        <h6 class="mb-2"><i class="bi bi-image-alt me-1"></i>Aadhaar Document</h6>
                        @if (!string.IsNullOrEmpty(Model.AadhaarDocumentPath))
                        {
                            <img src="@Model.AadhaarDocumentPath" class="img-fluid rounded" style="max-height: 250px;" />
                        }
                        else
                        {
                            <p class="text-muted">Not uploaded</p>
                        }
                    </div>
                </div>

                <div class="col-md-6 mb-4">
                    <div class="border p-3 rounded shadow-sm">
                        <h6 class="mb-2"><i class="bi bi-image-alt me-1"></i>PAN Document</h6>
                        @if (!string.IsNullOrEmpty(Model.PanCardDocumentPath))
                        {
                            <img src="@Model.PanCardDocumentPath" class="img-fluid rounded" style="max-height: 250px;" />
                        }
                        else
                        {
                            <p class="text-muted">Not uploaded</p>
                        }
                    </div>
                </div>
            </div>

            <div class="text-center mt-4">
                @if (Model.KycStatus == "Rejected")
                {
                    <a href="@Url.Action("PartnerKYC", "Partner")" class="btn btn-danger me-2">
                        <i class="bi bi-arrow-repeat me-1"></i>Resubmit KYC
                    </a>
                }

                @if (Model.KycStatus != "Approved")
                {
                    <a href="@Url.Action("EditKYC", "Partner", new { id = Model.KYC_Id })" class="btn btn-warning">
                        <i class="bi bi-pencil-square me-1"></i>Edit KYC
                    </a>
                }
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap Icons CDN (if not already added in layout) -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

<!-- Fade message script -->
@section Scripts {
    <script>
        setTimeout(() => {
            document.querySelectorAll('.fade-message').forEach(el => {
                el.style.transition = 'opacity 1s ease';
                el.style.opacity = '0';
                setTimeout(() => el.remove(), 1000);
            });
        }, 5000);
    </script>
}
